<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Aarav Mehta — 3D Sample Portfolio (Sample for Sandip)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--bg:#030417;--card:#071225;--accent:#5eead4}
    html,body{height:100%;}
    body{margin:0;font-family:Inter,ui-sans-serif,system-ui,-apple-system,'Segoe UI',Roberto,Noto Sans,sans-serif;background:linear-gradient(180deg,#020617 0%, #061226 100%);color:#dbeafe}
    canvas{display:block}
    .glass{background:rgba(15,23,42,0.55);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.04);border-radius:12px}
    .btn{background:var(--accent);color:#021018;padding:.55rem .9rem;border-radius:.5rem;font-weight:600}
    .project-bubble{cursor:pointer}
    /* accessibility focus */
    :focus{outline:3px solid rgba(94,234,212,0.12);outline-offset:3px}
  </style>
</head>
<body>
  <!-- Sidebar / Info -->
  <div class="fixed inset-0 z-30 pointer-events-none">
    <div class="max-w-6xl mx-auto px-6 py-8 flex items-start gap-6">
      <aside class="w-80 glass p-5 pointer-events-auto">
        <h1 class="text-2xl font-bold text-white">Aarav Mehta</h1>
        <p class="text-slate-300 mt-1">AI Engineer & Competitive Programmer</p>
        <div class="mt-4 text-sm text-slate-300">
          <div><strong>Skills:</strong> Python, PyTorch, TensorFlow, React, Node.js, SQL, Docker</div>
        </div>
        <div class="mt-4 flex gap-2">
          <a class="btn" href="#contact">Contact</a>
          <a class="glass px-3 py-2 rounded-md text-sm text-slate-200" href="#projects">Projects</a>
        </div>
        <div class="mt-4 text-xs text-slate-400">
          <div>Email: <a class="text-teal-300" href="mailto:aarav.mehta.dev@gmail.com">aarav.mehta.dev@gmail.com</a></div>
          <div class="mt-2">GitHub: <a class="text-teal-300" href="https://github.com/aaravdev" target="_blank">github.com/aaravdev</a></div>
          <div class="mt-1">LinkedIn: <a class="text-teal-300" href="https://linkedin.com/in/aarav-mehta" target="_blank">linkedin.com/in/aarav-mehta</a></div>
        </div>
        <div class="mt-4 text-xs text-slate-400">Tip: Drag to orbit. Scroll to zoom. Click bubbles for details.</div>
      </aside>

      <div class="flex-1 pointer-events-none"></div>
    </div>
  </div>

  <!-- 3D canvas container -->
  <div id="canvas-wrap" style="position:fixed;inset:0;z-index:10">
    <canvas id="scene"></canvas>
  </div>

  <!-- Overlay HUD (project list + modal) -->
  <div id="hud" class="fixed bottom-6 left-1/2 -translate-x-1/2 z-40 pointer-events-auto w-[92%] max-w-4xl">
    <div class="glass p-4 flex items-center justify-between">
      <div id="projects" class="flex gap-4 items-center overflow-x-auto">
        <!-- project pills auto-inserted -->
      </div>
      <div class="flex items-center gap-3">
        <button id="reset-view" class="glass px-3 py-2 rounded-md">Reset</button>
        <a class="btn" href="#contact">Hire Me</a>
      </div>
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="hidden fixed inset-0 z-50 items-center justify-center bg-black/60 p-6">
    <div class="glass p-6 max-w-2xl w-full">
      <button id="modal-close" class="float-right">✖</button>
      <div id="modal-content" class="mt-4"></div>
    </div>
  </div>

  <!-- Contact Section Anchor (non-3D fallback) -->
  <section id="contact" class="fixed right-6 top-6 z-50 glass p-4 text-sm" style="display:none">
    <h3 class="font-bold">Contact</h3>
    <p class="text-slate-300">aarav.mehta.dev@gmail.com</p>
  </section>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
  <script>
    // --- Randomized sample data (from user's "random 1..6") ---
    const SAMPLE = {
      name: 'Aarav Mehta',
      tagline: 'AI Engineer & Competitive Programmer',
      skills: ['Python','PyTorch','TensorFlow','React','Node.js','SQL','Docker'],
      projects: [
        {id:'cropvision', title:'CropVision', tag:'ML • CV', year:2024, desc:'Plant disease detection using CNNs and GAN augmentation. Trained on custom dataset with augmentation pipeline.'},
        {id:'quantumleaf', title:'QuantumLeaf (QCNN)', tag:'Quantum • ML', year:2025, desc:'Hybrid quantum-classical QCNN for precision agriculture — published demo and reproducible notebook.'},
        {id:'navbuddy', title:'NavBuddy', tag:'Accessibility • Robotics', year:2024, desc:'Assistive navigation app for visually impaired — real-time obstacle alerts and haptic feedback.'}
      ],
      contactEmail: 'aarav.mehta.dev@gmail.com',
      github: 'https://github.com/aaravdev',
      linkedin: 'https://linkedin.com/in/aarav-mehta'
    };

    // Populate HUD project pills
    const projectsEl = document.getElementById('projects');
    SAMPLE.projects.forEach(p=>{
      const btn = document.createElement('button');
      btn.className = 'project-bubble glass px-3 py-2 rounded-md text-sm';
      btn.innerHTML = `<strong>${p.title}</strong><div class='text-xs text-slate-300'>${p.tag} • ${p.year}</div>`;
      btn.onclick = ()=> openProjectModal(p);
      projectsEl.appendChild(btn);
    });

    // --- Three.js scene setup ---
    const canvas = document.getElementById('scene');
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: true, alpha: true });
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.setClearColor(0x000000, 0);

    const scene = new THREE.Scene();

    const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 0.1, 200);
    camera.position.set(0, 3.2, 9);

    // Controls: simple orbit implementation
    let isPointerDown = false, lastX=0, lastY=0, yaw=0, pitch=0;
    function onPointerDown(e){ isPointerDown=true; lastX=e.clientX; lastY=e.clientY; }
    function onPointerMove(e){ if(!isPointerDown) return; const dx=(e.clientX-lastX)*0.005, dy=(e.clientY-lastY)*0.005; lastX=e.clientX; lastY=e.clientY; yaw += dx; pitch += dy; pitch = Math.max(-1.2, Math.min(1.2, pitch)); }
    function onPointerUp(){ isPointerDown=false; }
    window.addEventListener('pointerdown', onPointerDown); window.addEventListener('pointermove', onPointerMove); window.addEventListener('pointerup', onPointerUp);

    // Resize
    function resize(){ renderer.setSize(window.innerWidth, window.innerHeight); camera.aspect = window.innerWidth/window.innerHeight; camera.updateProjectionMatrix(); }
    window.addEventListener('resize', resize); resize();

    // Lights
    const hemi = new THREE.HemisphereLight(0xffffff, 0x111122, 0.7); scene.add(hemi);
    const dir = new THREE.DirectionalLight(0xffffff, 0.8); dir.position.set(5,10,7); scene.add(dir);

    // Floor subtle
    const floorGeo = new THREE.PlaneGeometry(200,200);
    const floorMat = new THREE.MeshStandardMaterial({color:0x030417, roughness:0.9, metalness:0.1});
    const floor = new THREE.Mesh(floorGeo, floorMat); floor.rotation.x = -Math.PI/2; floor.position.y = -1.1; scene.add(floor);

    // Rotating torus logo
    const torusGeo = new THREE.TorusKnotGeometry(1.1, 0.28, 128, 32);
    const torusMat = new THREE.MeshStandardMaterial({color:0x7c3aed, emissive:0x1b8b74, metalness:0.6, roughness:0.25});
    const torus = new THREE.Mesh(torusGeo, torusMat); torus.position.set(0, 2.6, -1.5); torus.scale.set(1.1,1.1,1.1); scene.add(torus);

    // Floating project panels (plane with texture from canvas)
    const panels = [];
    const panelBase = new THREE.PlaneGeometry(2.2, 1.2);

    function makeLabelCanvas(title, desc){
      const W = 600, H = 320; const c = document.createElement('canvas'); c.width = W; c.height = H; const ctx = c.getContext('2d');
      // background
      ctx.fillStyle = '#071225'; ctx.fillRect(0,0,W,H);
      // accent strip
      ctx.fillStyle = '#07303b'; ctx.fillRect(0,0,W,60);
      // title
      ctx.fillStyle = '#e6f9f5'; ctx.font = 'bold 26px Inter, sans-serif'; ctx.fillText(title, 20, 42);
      // desc
      ctx.fillStyle = '#a5b4c1'; ctx.font = '14px Inter, sans-serif'; wrapText(ctx, desc, 20, 80, W-40, 20);
      // footer tags
      return c;
    }
    function wrapText(ctx, text, x, y, maxWidth, lineHeight){ const words = text.split(' '); let line=''; for(let n=0;n<words.length;n++){ const testLine = line + words[n] + ' '; const metrics = ctx.measureText(testLine); const testWidth = metrics.width; if(testWidth > maxWidth && n>0){ ctx.fillText(line, x, y); line = words[n] + ' '; y += lineHeight; } else { line = testLine; }} ctx.fillText(line, x, y); }

    SAMPLE.projects.forEach((p,i)=>{
      const canvasTex = new THREE.CanvasTexture(makeLabelCanvas(p.title, p.desc)); canvasTex.minFilter = THREE.LinearFilter; canvasTex.needsUpdate = true;
      const mat = new THREE.MeshStandardMaterial({map:canvasTex, transparent:false, side:THREE.DoubleSide});
      const mesh = new THREE.Mesh(panelBase, mat);
      const angle = (i - (SAMPLE.projects.length-1)/2) * 0.9;
      const radius = 4.2;
      mesh.position.set(Math.sin(angle)*radius, 1.2 + i*0.05, Math.cos(angle)*radius - 1.8);
      mesh.rotation.y = -angle;
      mesh.userData = {project: p};
      scene.add(mesh);
      panels.push(mesh);
    });

    // Raycaster for clicking panels
    const ray = new THREE.Raycaster(); const mouse = new THREE.Vector2();
    function onClick(e){ if(!e.isPrimary) return; const rect = renderer.domElement.getBoundingClientRect(); mouse.x = ((e.clientX - rect.left)/rect.width)*2-1; mouse.y = -((e.clientY - rect.top)/rect.height)*2+1; ray.setFromCamera(mouse, camera); const hits = ray.intersectObjects(panels); if(hits.length>0){ const p = hits[0].object.userData.project; openProjectModal(p); } }
    window.addEventListener('pointerdown', onClick);

    // animate
    let t0 = 0;
    function animate(t){ t *= 0.001; const dt = t - t0; t0 = t;
      // camera orbit applied from yaw/pitch
      const target = new THREE.Vector3(0,1.4,0);
      const r = 9; const camX = Math.sin(yaw)*r; const camZ = Math.cos(yaw)*r;
      camera.position.x += (camX - camera.position.x) * 0.08;
      camera.position.z += (camZ - camera.position.z) * 0.08;
      camera.position.y += (2.4 + pitch*1.5 - camera.position.y) * 0.08;
      camera.lookAt(target);

      // gentle animation for panels
      panels.forEach((m, idx)=>{ m.rotation.z = Math.sin(t*0.8 + idx)*0.08; m.position.y = 1.1 + Math.sin(t*1.4 + idx)*0.06; });

      // torus spin
      torus.rotation.x += 0.006; torus.rotation.y += 0.01 + Math.sin(t*0.5)*0.001;

      renderer.render(scene, camera);
      requestAnimationFrame(animate);
    }
    requestAnimationFrame(animate);

    // Reset view
    document.getElementById('reset-view').addEventListener('click', ()=>{ yaw = 0; pitch = 0; camera.position.set(0,3.2,9); });

    // Modal handlers
    const modal = document.getElementById('modal'); const modalContent = document.getElementById('modal-content');
    function openProjectModal(p){ modalContent.innerHTML = `<h2 class='text-xl font-bold text-white'>${p.title}</h2><p class='text-slate-300 mt-2'>${p.desc}</p><p class='text-xs text-slate-400 mt-3'>Tags: ${p.tag} • ${p.year}</p><div class='mt-4'><a class='btn' href='#' onclick="window.open('${SAMPLE.github}','_blank')">View Code</a></div>`; modal.classList.remove('hidden'); modal.style.display='flex'; }
    document.getElementById('modal-close').addEventListener('click', ()=>{ modal.classList.add('hidden'); modal.style.display='none'; });

    // Accessibility & keyboard
    window.addEventListener('keydown', (e)=>{
      if(e.key==='Escape') { modal.classList.add('hidden'); modal.style.display='none'; }
      if(e.key==='ArrowLeft') yaw -= 0.12;
      if(e.key==='ArrowRight') yaw += 0.12;
      if(e.key==='ArrowUp') pitch -= 0.07;
      if(e.key==='ArrowDown') pitch += 0.07;
    });

    // Clean up on unload
    window.addEventListener('beforeunload', ()=>{ window.removeEventListener('pointerdown', onClick); });
  </script>
</body>
</html>
